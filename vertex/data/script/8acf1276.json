{
  "enable": true,
  "cron": "* * * * *",
  "script": "async () => {\n\n    for (const key of Object.keys(global.runningClient)) { \n    \n        const client = global.runningClient[key];\n\n        if ( client.url == 'http://127.0.0.1:18230'){\n\n\n    for (let i = 0; i < client.maindata.torrents.length; i++){\n    const torrent = client.maindata.torrents[i];\n    const { uploaded, size, progress} = client.maindata.torrents[i];\n    logger.info(\"name :\" + torrent.name);\n    if (size <= 1.5 * 1024 * 1024 * 1024 && progress < 1)\n        { \n            const uploadSpeedLimit = 20 * 1024 * 1024;\n            logger.info(\"小体积种子已限制到20\");\n            await client.setSpeedLimit(client.maindata.torrents[i].hash, 'upload', uploadSpeedLimit);\n        }\n    if (uploaded/size <= 1.05 )\n    { \n        const uploadSpeedLimit = 80 * 1024 * 1024;\n        logger.info(\"总上传/种子大小 :\" + uploaded/size + \"已限制到80\");\n        await client.setSpeedLimit(client.maindata.torrents[i].hash, 'upload', uploadSpeedLimit);\n    }//如果已上传/种子总大小 低于 1.05，拉高上传速度\n    if(uploaded/size > 1.05 && uploaded/size < 2.05 ){\n        const uploadSpeedLimit = 40 * 1024 * 1024;\n        logger.info(\"总上传/种子大小 :\" + uploaded/size + \"已限制到40\");\n        await client.setSpeedLimit(client.maindata.torrents[i].hash, 'upload', uploadSpeedLimit);\n    }//如果已上传/种子总大小 大于 1.05，降低一档上传速度\n    if(uploaded/size > 2.05 && uploaded/size < 3.05 ){\n        const uploadSpeedLimit = 20 * 1024 * 1024;\n        logger.info(\"总上传/种子大小 :\" + uploaded/size + \"已限制到20\");\n        await client.setSpeedLimit(client.maindata.torrents[i].hash, 'upload', uploadSpeedLimit);\n    }//如果已上传/种子总大小 大于 2.05，降低一档上传速度\n    if(uploaded/size > 3.05 && uploaded/size < 4.05 ){\n        const uploadSpeedLimit = 10 * 1024 * 1024;\n        logger.info(\"总上传/种子大小 :\" + uploaded/size + \"已限制到10\");\n        await client.setSpeedLimit(client.maindata.torrents[i].hash, 'upload', uploadSpeedLimit);\n    }//如果已上传/种子总大小 大于 3.05，降低一档上传速度\n    if(uploaded/size > 4.05 ){\n        const uploadSpeedLimit = 2 * 1024 * 1024;\n        logger.info(\"总上传/种子大小 :\" + uploaded/size + \"已限制到2\");\n        await client.setSpeedLimit(client.maindata.torrents[i].hash, 'upload', uploadSpeedLimit);\n    }//如果已上传/种子总大小 大于 4.05，降低一档上传速度\n\n}\n  }\n  }\n}",
  "alias": "不可说动态限速",
  "id": "8acf1276"
}